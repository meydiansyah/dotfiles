"use strict";var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var jt=v(()=>{var Bt;(function(t){(function(e){var n=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=a(t);typeof n.Reflect>"u"?n.Reflect=t:r=a(n.Reflect,r),e(r);function a(o,c){return function(u,l){typeof o[u]!="function"&&Object.defineProperty(o,u,{configurable:!0,writable:!0,value:l}),c&&c(u,l)}}})(function(e){var n=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",a=r&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=r&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",u={__proto__:[]}instanceof Array,l=!c&&!u,d={create:c?function(){return Ee(Object.create(null))}:u?function(){return Ee({__proto__:null})}:function(){return Ee({})},has:l?function(i,s){return n.call(i,s)}:function(i,s){return s in i},get:l?function(i,s){return n.call(i,s)?i[s]:void 0}:function(i,s){return i[s]}},g=Object.getPrototypeOf(Function),E=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",O=!E&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:mr(),q=!E&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ar(),W=!E&&typeof WeakMap=="function"?WeakMap:wr(),H=new W;function Zn(i,s,f,p){if(S(f)){if(!Ct(i))throw new TypeError;if(!Rt(s))throw new TypeError;return sr(i,s)}else{if(!Ct(i))throw new TypeError;if(!N(s))throw new TypeError;if(!N(p)&&!S(p)&&!Z(p))throw new TypeError;return Z(p)&&(p=void 0),f=G(f),cr(i,s,f,p)}}e("decorate",Zn);function Xn(i,s){function f(p,h){if(!N(p))throw new TypeError;if(!S(h)&&!yr(h))throw new TypeError;Mt(i,s,p,h)}return f}e("metadata",Xn);function er(i,s,f,p){if(!N(f))throw new TypeError;return S(p)||(p=G(p)),Mt(i,s,f,p)}e("defineMetadata",er);function tr(i,s,f){if(!N(s))throw new TypeError;return S(f)||(f=G(f)),bt(i,s,f)}e("hasMetadata",tr);function nr(i,s,f){if(!N(s))throw new TypeError;return S(f)||(f=G(f)),we(i,s,f)}e("hasOwnMetadata",nr);function rr(i,s,f){if(!N(s))throw new TypeError;return S(f)||(f=G(f)),Et(i,s,f)}e("getMetadata",rr);function ir(i,s,f){if(!N(s))throw new TypeError;return S(f)||(f=G(f)),St(i,s,f)}e("getOwnMetadata",ir);function ar(i,s){if(!N(i))throw new TypeError;return S(s)||(s=G(s)),It(i,s)}e("getMetadataKeys",ar);function or(i,s){if(!N(i))throw new TypeError;return S(s)||(s=G(s)),Nt(i,s)}e("getOwnMetadataKeys",or);function ur(i,s,f){if(!N(s))throw new TypeError;S(f)||(f=G(f));var p=ie(s,f,!1);if(S(p)||!p.delete(i))return!1;if(p.size>0)return!0;var h=H.get(s);return h.delete(f),h.size>0||H.delete(s),!0}e("deleteMetadata",ur);function sr(i,s){for(var f=i.length-1;f>=0;--f){var p=i[f],h=p(s);if(!S(h)&&!Z(h)){if(!Rt(h))throw new TypeError;s=h}}return s}function cr(i,s,f,p){for(var h=i.length-1;h>=0;--h){var C=i[h],_=C(s,f,p);if(!S(_)&&!Z(_)){if(!N(_))throw new TypeError;p=_}}return p}function ie(i,s,f){var p=H.get(i);if(S(p)){if(!f)return;p=new O,H.set(i,p)}var h=p.get(s);if(S(h)){if(!f)return;h=new O,p.set(s,h)}return h}function bt(i,s,f){var p=we(i,s,f);if(p)return!0;var h=be(s);return Z(h)?!1:bt(i,h,f)}function we(i,s,f){var p=ie(s,f,!1);return S(p)?!1:pr(p.has(i))}function Et(i,s,f){var p=we(i,s,f);if(p)return St(i,s,f);var h=be(s);if(!Z(h))return Et(i,h,f)}function St(i,s,f){var p=ie(s,f,!1);if(!S(p))return p.get(i)}function Mt(i,s,f,p){var h=ie(f,p,!0);h.set(i,s)}function It(i,s){var f=Nt(i,s),p=be(i);if(p===null)return f;var h=It(p,s);if(h.length<=0)return f;if(f.length<=0)return h;for(var C=new q,_=[],T=0,y=f;T<y.length;T++){var m=y[T],A=C.has(m);A||(C.add(m),_.push(m))}for(var V=0,Dt=h;V<Dt.length;V++){var m=Dt[V],A=C.has(m);A||(C.add(m),_.push(m))}return _}function Nt(i,s){var f=[],p=ie(i,s,!1);if(S(p))return f;for(var h=p.keys(),C=vr(h),_=0;;){var T=_r(C);if(!T)return f.length=_,f;var y=gr(T);try{f[_]=y}catch(m){try{Tr(C)}finally{throw m}}_++}}function Ot(i){if(i===null)return 1;switch(typeof i){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return i===null?1:6;default:return 6}}function S(i){return i===void 0}function Z(i){return i===null}function fr(i){return typeof i=="symbol"}function N(i){return typeof i=="object"?i!==null:typeof i=="function"}function dr(i,s){switch(Ot(i)){case 0:return i;case 1:return i;case 2:return i;case 3:return i;case 4:return i;case 5:return i}var f=s===3?"string":s===5?"number":"default",p=Pt(i,a);if(p!==void 0){var h=p.call(i,f);if(N(h))throw new TypeError;return h}return lr(i,f==="default"?"number":f)}function lr(i,s){if(s==="string"){var f=i.toString;if(X(f)){var p=f.call(i);if(!N(p))return p}var h=i.valueOf;if(X(h)){var p=h.call(i);if(!N(p))return p}}else{var h=i.valueOf;if(X(h)){var p=h.call(i);if(!N(p))return p}var C=i.toString;if(X(C)){var p=C.call(i);if(!N(p))return p}}throw new TypeError}function pr(i){return!!i}function hr(i){return""+i}function G(i){var s=dr(i,3);return fr(s)?s:hr(s)}function Ct(i){return Array.isArray?Array.isArray(i):i instanceof Object?i instanceof Array:Object.prototype.toString.call(i)==="[object Array]"}function X(i){return typeof i=="function"}function Rt(i){return typeof i=="function"}function yr(i){switch(Ot(i)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(i,s){var f=i[s];if(f!=null){if(!X(f))throw new TypeError;return f}}function vr(i){var s=Pt(i,o);if(!X(s))throw new TypeError;var f=s.call(i);if(!N(f))throw new TypeError;return f}function gr(i){return i.value}function _r(i){var s=i.next();return s.done?!1:s}function Tr(i){var s=i.return;s&&s.call(i)}function be(i){var s=Object.getPrototypeOf(i);if(typeof i!="function"||i===g||s!==g)return s;var f=i.prototype,p=f&&Object.getPrototypeOf(f);if(p==null||p===Object.prototype)return s;var h=p.constructor;return typeof h!="function"||h===i?s:h}function mr(){var i={},s=[],f=function(){function _(T,y,m){this._index=0,this._keys=T,this._values=y,this._selector=m}return _.prototype["@@iterator"]=function(){return this},_.prototype[o]=function(){return this},_.prototype.next=function(){var T=this._index;if(T>=0&&T<this._keys.length){var y=this._selector(this._keys[T],this._values[T]);return T+1>=this._keys.length?(this._index=-1,this._keys=s,this._values=s):this._index++,{value:y,done:!1}}return{value:void 0,done:!0}},_.prototype.throw=function(T){throw this._index>=0&&(this._index=-1,this._keys=s,this._values=s),T},_.prototype.return=function(T){return this._index>=0&&(this._index=-1,this._keys=s,this._values=s),{value:T,done:!0}},_}();return function(){function _(){this._keys=[],this._values=[],this._cacheKey=i,this._cacheIndex=-2}return Object.defineProperty(_.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_.prototype.has=function(T){return this._find(T,!1)>=0},_.prototype.get=function(T){var y=this._find(T,!1);return y>=0?this._values[y]:void 0},_.prototype.set=function(T,y){var m=this._find(T,!0);return this._values[m]=y,this},_.prototype.delete=function(T){var y=this._find(T,!1);if(y>=0){for(var m=this._keys.length,A=y+1;A<m;A++)this._keys[A-1]=this._keys[A],this._values[A-1]=this._values[A];return this._keys.length--,this._values.length--,T===this._cacheKey&&(this._cacheKey=i,this._cacheIndex=-2),!0}return!1},_.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=i,this._cacheIndex=-2},_.prototype.keys=function(){return new f(this._keys,this._values,p)},_.prototype.values=function(){return new f(this._keys,this._values,h)},_.prototype.entries=function(){return new f(this._keys,this._values,C)},_.prototype["@@iterator"]=function(){return this.entries()},_.prototype[o]=function(){return this.entries()},_.prototype._find=function(T,y){return this._cacheKey!==T&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=T)),this._cacheIndex<0&&y&&(this._cacheIndex=this._keys.length,this._keys.push(T),this._values.push(void 0)),this._cacheIndex},_}();function p(_,T){return _}function h(_,T){return T}function C(_,T){return[_,T]}}function Ar(){return function(){function i(){this._map=new O}return Object.defineProperty(i.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),i.prototype.has=function(s){return this._map.has(s)},i.prototype.add=function(s){return this._map.set(s,s),this},i.prototype.delete=function(s){return this._map.delete(s)},i.prototype.clear=function(){this._map.clear()},i.prototype.keys=function(){return this._map.keys()},i.prototype.values=function(){return this._map.values()},i.prototype.entries=function(){return this._map.entries()},i.prototype["@@iterator"]=function(){return this.keys()},i.prototype[o]=function(){return this.keys()},i}()}function wr(){var i=16,s=d.create(),f=p();return function(){function y(){this._key=p()}return y.prototype.has=function(m){var A=h(m,!1);return A!==void 0?d.has(A,this._key):!1},y.prototype.get=function(m){var A=h(m,!1);return A!==void 0?d.get(A,this._key):void 0},y.prototype.set=function(m,A){var V=h(m,!0);return V[this._key]=A,this},y.prototype.delete=function(m){var A=h(m,!1);return A!==void 0?delete A[this._key]:!1},y.prototype.clear=function(){this._key=p()},y}();function p(){var y;do y="@@WeakMap@@"+T();while(d.has(s,y));return s[y]=!0,y}function h(y,m){if(!n.call(y,f)){if(!m)return;Object.defineProperty(y,f,{value:d.create()})}return y[f]}function C(y,m){for(var A=0;A<m;++A)y[A]=Math.random()*255|0;return y}function _(y){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(y)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(y)):C(new Uint8Array(y),y):C(new Array(y),y)}function T(){var y=_(i);y[6]=y[6]&79|64,y[8]=y[8]&191|128;for(var m="",A=0;A<i;++A){var V=y[A];(A===4||A===6||A===8)&&(m+="-"),V<16&&(m+="0"),m+=V.toString(16).toLowerCase()}return m}}function Ee(i){return i.__=void 0,delete i.__,i}})})(Bt||(Bt={}))});var M=v(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.NAMED_TAG="named";j.NAME_TAG="name";j.UNMANAGED_TAG="unmanaged";j.OPTIONAL_TAG="optional";j.INJECT_TAG="inject";j.MULTI_INJECT_TAG="multi_inject";j.TAGGED="inversify:tagged";j.TAGGED_PROP="inversify:tagged_props";j.PARAM_TYPES="inversify:paramtypes";j.DESIGN_PARAM_TYPES="design:paramtypes";j.POST_CONSTRUCT="post_construct"});var k=v(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var br={Request:"Request",Singleton:"Singleton",Transient:"Transient"};ae.BindingScopeEnum=br;var Er={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};ae.BindingTypeEnum=Er;var Sr={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};ae.TargetTypeEnum=Sr});var Y=v(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});var Mr=0;function Ir(){return Mr++}Se.id=Ir});var xt=v(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});var Nr=k(),Or=Y(),Cr=function(){function t(e,n){this.id=Or.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=n,this.type=Nr.BindingTypeEnum.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();Me.Binding=Cr});var D=v(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.";w.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:";w.NULL_ARGUMENT="NULL argument";w.KEY_NOT_FOUND="Key Not Found";w.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:";w.CANNOT_UNBIND="Could not unbind serviceIdentifier:";w.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";w.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:";w.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";w.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};w.CIRCULAR_DEPENDENCY="Circular dependency found:";w.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.";w.INVALID_BINDING_TYPE="Invalid binding type:";w.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.";w.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!";w.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";w.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier";w.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";w.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+(t[0]+" must be >= than the number of constructor arguments of its base class.")};w.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.";w.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').";w.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean";w.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean";w.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";w.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};w.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency "+("in one of the '"+t[0]+"' bindings. Please investigate bindings with")+("service identifier '"+t[1]+"'.")};w.STACK_OVERFLOW="Maximum call stack size exceeded"});var Oe=v(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});var Ie=M(),Rr=function(){function t(){}return t.prototype.getConstructorMetadata=function(e){var n=Reflect.getMetadata(Ie.PARAM_TYPES,e),r=Reflect.getMetadata(Ie.TAGGED,e);return{compilerGeneratedMetadata:n,userGeneratedMetadata:r||{}}},t.prototype.getPropertiesMetadata=function(e){var n=Reflect.getMetadata(Ie.TAGGED_PROP,e)||[];return n},t}();Ne.MetadataReader=Rr});var qt=v(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});var Pr={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};Ce.BindingCount=Pr});var Pe=v(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});var Dr=D();function Br(t){return t instanceof RangeError||t.message===Dr.STACK_OVERFLOW}Re.isStackOverflowExeption=Br});var ee=v(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});var jr=D();function kt(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}z.getServiceIdentifierAsString=kt;function xr(t,e,n){var r="",a=n(t,e);return a.length!==0&&(r=`
Registered bindings:`,a.forEach(function(o){var c="Object";o.implementationType!==null&&(c=Ut(o.implementationType)),r=r+`
 `+c,o.constraint.metaData&&(r=r+" - "+o.constraint.metaData)})),r}z.listRegisteredBindingsForServiceIdentifier=xr;function Gt(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:Gt(t.parentRequest,e)}function qr(t){function e(r,a){a===void 0&&(a=[]);var o=kt(r.serviceIdentifier);return a.push(o),r.parentRequest!==null?e(r.parentRequest,a):a}var n=e(t);return n.reverse().join(" --> ")}function Lt(t){t.childRequests.forEach(function(e){if(Gt(e,e.serviceIdentifier)){var n=qr(e);throw new Error(jr.CIRCULAR_DEPENDENCY+" "+n)}else Lt(e)})}z.circularDependencyToException=Lt;function kr(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),a=e.getCustomTags();return r!==null&&(n+=r.toString()+`
`),a!==null&&a.forEach(function(o){n+=o.toString()+`
`})," "+t+`
 `+t+" - "+n}else return" "+t}z.listMetadataForTarget=kr;function Ut(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}z.getFunctionName=Ut});var Ft=v(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});var Gr=Y(),Lr=function(){function t(e){this.id=Gr.id(),this.container=e}return t.prototype.addPlan=function(e){this.plan=e},t.prototype.setCurrentRequest=function(e){this.currentRequest=e},t}();De.Context=Lr});var x=v(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});var Ur=M(),Fr=function(){function t(e,n){this.key=e,this.value=n}return t.prototype.toString=function(){return this.key===Ur.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();Be.Metadata=Fr});var Wt=v(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});var Wr=function(){function t(e,n){this.parentContext=e,this.rootRequest=n}return t}();je.Plan=Wr});var L=v(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});var Vt=D(),Jt=M();function Vr(t,e,n,r){var a=Jt.TAGGED;Ht(a,t,e,r,n)}oe.tagParameter=Vr;function Yr(t,e,n){var r=Jt.TAGGED_PROP;Ht(r,t.constructor,e,n)}oe.tagProperty=Yr;function Ht(t,e,n,r,a){var o={},c=typeof a=="number",u=a!==void 0&&c?a.toString():n;if(c&&n!==void 0)throw new Error(Vt.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var l=o[u];if(!Array.isArray(l))l=[];else for(var d=0,g=l;d<g.length;d++){var E=g[d];if(E.key===r.key)throw new Error(Vt.DUPLICATED_METADATA+" "+E.key.toString())}l.push(r),o[u]=l,Reflect.defineMetadata(t,o,e)}function Yt(t,e){Reflect.decorate(t,e)}function Jr(t,e){return function(n,r){e(n,r,t)}}function Hr(t,e,n){typeof n=="number"?Yt([Jr(n,t)],e):typeof n=="string"?Reflect.decorate([t],e,n):Yt([t],e)}oe.decorate=Hr});var xe=v(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});var zr=D(),Kr=M(),Qr=x(),zt=L(),$r=function(){function t(e){this._cb=e}return t.prototype.unwrap=function(){return this._cb()},t}();he.LazyServiceIdentifer=$r;function Zr(t){return function(e,n,r){if(t===void 0)throw new Error(zr.UNDEFINED_INJECT_ANNOTATION(e.name));var a=new Qr.Metadata(Kr.INJECT_TAG,t);typeof r=="number"?zt.tagParameter(e,n,r,a):zt.tagProperty(e,n,a)}}he.inject=Zr});var Kt=v(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});var Xr=function(){function t(e){this.str=e}return t.prototype.startsWith=function(e){return this.str.indexOf(e)===0},t.prototype.endsWith=function(e){var n="",r=e.split("").reverse().join("");return n=this.str.split("").reverse().join(""),this.startsWith.call({str:n},r)},t.prototype.contains=function(e){return this.str.indexOf(e)!==-1},t.prototype.equals=function(e){return this.str===e},t.prototype.value=function(){return this.str},t}();qe.QueryableString=Xr});var Ge=v(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});var R=M(),ei=Y(),Qt=x(),ti=Kt(),ni=function(){function t(e,n,r,a){this.id=ei.id(),this.type=e,this.serviceIdentifier=r,this.name=new ti.QueryableString(n||""),this.metadata=new Array;var o=null;typeof a=="string"?o=new Qt.Metadata(R.NAMED_TAG,a):a instanceof Qt.Metadata&&(o=a),o!==null&&this.metadata.push(o)}return t.prototype.hasTag=function(e){for(var n=0,r=this.metadata;n<r.length;n++){var a=r[n];if(a.key===e)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(R.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(e){return this.matchesTag(R.MULTI_INJECT_TAG)(e)},t.prototype.isNamed=function(){return this.hasTag(R.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(e){return e.key!==R.INJECT_TAG&&e.key!==R.MULTI_INJECT_TAG&&e.key!==R.NAME_TAG&&e.key!==R.UNMANAGED_TAG&&e.key!==R.NAMED_TAG})},t.prototype.isOptional=function(){return this.matchesTag(R.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===R.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return e.key!==R.INJECT_TAG&&e.key!==R.MULTI_INJECT_TAG&&e.key!==R.NAME_TAG&&e.key!==R.UNMANAGED_TAG&&e.key!==R.NAMED_TAG}):null},t.prototype.matchesNamedTag=function(e){return this.matchesTag(R.NAMED_TAG)(e)},t.prototype.matchesTag=function(e){var n=this;return function(r){for(var a=0,o=n.metadata;a<o.length;a++){var c=o[a];if(c.key===e&&c.value===r)return!0}return!1}},t}();ke.Target=ni});var an=v(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});var ri=xe(),$t=D(),Zt=k(),ue=M(),Le=ee();se.getFunctionName=Le.getFunctionName;var Xt=Ge();function ii(t,e){var n=Le.getFunctionName(e),r=en(t,n,e,!1);return r}se.getDependencies=ii;function en(t,e,n,r){var a=t.getConstructorMetadata(n),o=a.compilerGeneratedMetadata;if(o===void 0){var c=$t.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(c)}var u=a.userGeneratedMetadata,l=Object.keys(u),d=n.length===0&&l.length>0,g=d?l.length:n.length,E=oi(r,e,o,u,g),O=tn(t,n),q=E.concat(O);return q}function ai(t,e,n,r,a){var o=a[t.toString()]||[],c=rn(o),u=c.unmanaged!==!0,l=r[t],d=c.inject||c.multiInject;if(l=d||l,l instanceof ri.LazyServiceIdentifer&&(l=l.unwrap()),u){var g=l===Object,E=l===Function,O=l===void 0,q=g||E||O;if(!e&&q){var W=$t.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(W)}var H=new Xt.Target(Zt.TargetTypeEnum.ConstructorArgument,c.targetName,l);return H.metadata=o,H}return null}function oi(t,e,n,r,a){for(var o=[],c=0;c<a;c++){var u=c,l=ai(u,t,e,n,r);l!==null&&o.push(l)}return o}function tn(t,e){for(var n=t.getPropertiesMetadata(e),r=[],a=Object.keys(n),o=0,c=a;o<c.length;o++){var u=c[o],l=n[u],d=rn(n[u]),g=d.targetName||u,E=d.inject||d.multiInject,O=new Xt.Target(Zt.TargetTypeEnum.ClassProperty,g,E);O.metadata=l,r.push(O)}var q=Object.getPrototypeOf(e.prototype).constructor;if(q!==Object){var W=tn(t,q);r=r.concat(W)}return r}function nn(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=Le.getFunctionName(n),a=en(t,r,n,!0),o=a.map(function(l){return l.metadata.filter(function(d){return d.key===ue.UNMANAGED_TAG})}),c=[].concat.apply([],o).length,u=a.length-c;return u>0?u:nn(t,n)}else return 0}se.getBaseClassDependencyCount=nn;function rn(t){var e={};return t.forEach(function(n){e[n.key.toString()]=n.value}),{inject:e[ue.INJECT_TAG],multiInject:e[ue.MULTI_INJECT_TAG],targetName:e[ue.NAME_TAG],unmanaged:e[ue.UNMANAGED_TAG]}}});var on=v(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var ui=Y(),si=function(){function t(e,n,r,a,o){this.id=ui.id(),this.serviceIdentifier=e,this.parentContext=n,this.parentRequest=r,this.target=o,this.childRequests=[],this.bindings=Array.isArray(a)?a:[a],this.requestScope=r===null?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var a=new t(e,this.parentContext,this,n,r);return this.childRequests.push(a),a},t}();Ue.Request=si});var hn=v(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});var ye=qt(),We=D(),cn=k(),un=M(),ci=Pe(),te=ee(),fn=Ft(),Ve=x(),fi=Wt(),Fe=an(),Ye=on(),dn=Ge();function ln(t){return t._bindingDictionary}fe.getBindingDictionary=ln;function di(t,e,n,r,a,o){var c=t?un.MULTI_INJECT_TAG:un.INJECT_TAG,u=new Ve.Metadata(c,n),l=new dn.Target(e,r,n,u);if(a!==void 0){var d=new Ve.Metadata(a,o);l.metadata.push(d)}return l}function sn(t,e,n,r,a){var o=ce(n.container,a.serviceIdentifier),c=[];return o.length===ye.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&typeof a.serviceIdentifier=="function"&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),o=ce(n.container,a.serviceIdentifier)),e?c=o:c=o.filter(function(u){var l=new Ye.Request(u.serviceIdentifier,n,r,u,a);return u.constraint(l)}),li(a.serviceIdentifier,c,a,n.container),c}function li(t,e,n,r){switch(e.length){case ye.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=te.getServiceIdentifierAsString(t),o=We.NOT_REGISTERED;throw o+=te.listMetadataForTarget(a,n),o+=te.listRegisteredBindingsForServiceIdentifier(r,a,ce),new Error(o);case ye.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case ye.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;var a=te.getServiceIdentifierAsString(t),o=We.AMBIGUOUS_MATCH+" "+a;throw o+=te.listRegisteredBindingsForServiceIdentifier(r,a,ce),new Error(o)}}function pn(t,e,n,r,a,o){var c,u;if(a===null){c=sn(t,e,r,null,o),u=new Ye.Request(n,r,null,c,o);var l=new fi.Plan(r,u);r.addPlan(l)}else c=sn(t,e,r,a,o),u=a.addChildRequest(o.serviceIdentifier,c,o);c.forEach(function(d){var g=null;if(o.isArray())g=u.addChildRequest(d.serviceIdentifier,d,o);else{if(d.cache)return;g=u}if(d.type===cn.BindingTypeEnum.Instance&&d.implementationType!==null){var E=Fe.getDependencies(t,d.implementationType);if(!r.container.options.skipBaseClassChecks){var O=Fe.getBaseClassDependencyCount(t,d.implementationType);if(E.length<O){var q=We.ARGUMENTS_LENGTH_MISMATCH(Fe.getFunctionName(d.implementationType));throw new Error(q)}}E.forEach(function(W){pn(t,!1,W.serviceIdentifier,r,g,W)})}})}function ce(t,e){var n=[],r=ln(t);return r.hasKey(e)?n=r.get(e):t.parent!==null&&(n=ce(t.parent,e)),n}function pi(t,e,n,r,a,o,c,u){u===void 0&&(u=!1);var l=new fn.Context(e),d=di(n,r,a,"",o,c);try{return pn(t,u,a,l,null,d),l}catch(g){throw ci.isStackOverflowExeption(g)&&l.plan&&te.circularDependencyToException(l.plan.rootRequest),g}}fe.plan=pi;function hi(t,e,n,r){var a=new dn.Target(cn.TargetTypeEnum.Variable,"",e,new Ve.Metadata(n,r)),o=new fn.Context(t),c=new Ye.Request(e,o,null,[],a);return c}fe.createMockRequest=hi});var gn=v(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});var yi=D(),vn=k(),yn=M();function vi(t,e,n){var r=e.filter(function(o){return o.target!==null&&o.target.type===vn.TargetTypeEnum.ClassProperty}),a=r.map(n);return r.forEach(function(o,c){var u="";u=o.target.name.value();var l=a[c];t[u]=l}),t}function gi(t,e){return new(t.bind.apply(t,[void 0].concat(e)))}function _i(t,e){if(Reflect.hasMetadata(yn.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(yn.POST_CONSTRUCT,t);try{e[n.value]()}catch(r){throw new Error(yi.POST_CONSTRUCT_ERROR(t.name,r.message))}}}function Ti(t,e,n){var r=null;if(e.length>0){var a=e.filter(function(c){return c.target!==null&&c.target.type===vn.TargetTypeEnum.ConstructorArgument}),o=a.map(n);r=gi(t,o),r=vi(r,e,n)}else r=new t;return _i(t,r),r}Je.resolveInstance=Ti});var Tn=v(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});var _n=D(),U=k(),mi=Pe(),Ai=ee(),wi=gn(),He=function(t,e,n){try{return n()}catch(r){throw mi.isStackOverflowExeption(r)?new Error(_n.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):r}},ze=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,a=e.target&&e.target.isArray(),o=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(a&&o)return r.map(function(E){var O=ze(t);return O(E)});var c=null;if(e.target.isOptional()&&n.length===0)return;var u=n[0],l=u.scope===U.BindingScopeEnum.Singleton,d=u.scope===U.BindingScopeEnum.Request;if(l&&u.activated)return u.cache;if(d&&t!==null&&t.has(u.id))return t.get(u.id);if(u.type===U.BindingTypeEnum.ConstantValue)c=u.cache;else if(u.type===U.BindingTypeEnum.Function)c=u.cache;else if(u.type===U.BindingTypeEnum.Constructor)c=u.implementationType;else if(u.type===U.BindingTypeEnum.DynamicValue&&u.dynamicValue!==null)c=He("toDynamicValue",u.serviceIdentifier,function(){return u.dynamicValue(e.parentContext)});else if(u.type===U.BindingTypeEnum.Factory&&u.factory!==null)c=He("toFactory",u.serviceIdentifier,function(){return u.factory(e.parentContext)});else if(u.type===U.BindingTypeEnum.Provider&&u.provider!==null)c=He("toProvider",u.serviceIdentifier,function(){return u.provider(e.parentContext)});else if(u.type===U.BindingTypeEnum.Instance&&u.implementationType!==null)c=wi.resolveInstance(u.implementationType,r,ze(t));else{var g=Ai.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(_n.INVALID_BINDING_TYPE+" "+g)}return typeof u.onActivation=="function"&&(c=u.onActivation(e.parentContext,c)),l&&(u.cache=c,u.activated=!0),d&&t!==null&&!t.has(u.id)&&t.set(u.id,c),c}};function bi(t){var e=ze(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}Ke.resolve=bi});var Qe=v(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var Ei=M(),Si=x(),mn=function(t,e){var n=t.parentRequest;return n!==null?e(n)?!0:mn(n,e):!1};ne.traverseAncerstors=mn;var An=function(t){return function(e){var n=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(t)(e)};return n.metaData=new Si.Metadata(t,e),n}};ne.taggedConstraint=An;var Mi=An(Ei.NAMED_TAG);ne.namedConstraint=Mi;var Ii=function(t){return function(e){var n=null;if(e!==null)if(n=e.bindings[0],typeof t=="string"){var r=n.serviceIdentifier;return r===t}else{var a=e.bindings[0].implementationType;return t===a}return!1}};ne.typeConstraint=Ii});var ve=v($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});var P=ge(),I=Qe(),Ni=function(){function t(e){this._binding=e}return t.prototype.when=function(e){return this._binding.constraint=e,new P.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(e){return this._binding.constraint=I.namedConstraint(e),new P.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){var n=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return n},new P.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(e,n){return this._binding.constraint=I.taggedConstraint(e)(n),new P.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(n){return I.typeConstraint(e)(n.parentRequest)},new P.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(e){return this._binding.constraint=function(n){return I.namedConstraint(e)(n.parentRequest)},new P.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(e,n){return this._binding.constraint=function(r){return I.taggedConstraint(e)(n)(r.parentRequest)},new P.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(n){return I.traverseAncerstors(n,I.typeConstraint(e))},new P.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(n){return!I.traverseAncerstors(n,I.typeConstraint(e))},new P.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(n){return I.traverseAncerstors(n,I.namedConstraint(e))},new P.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(n){return!I.traverseAncerstors(n,I.namedConstraint(e))},new P.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(e,n){return this._binding.constraint=function(r){return I.traverseAncerstors(r,I.taggedConstraint(e)(n))},new P.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(e,n){return this._binding.constraint=function(r){return!I.traverseAncerstors(r,I.taggedConstraint(e)(n))},new P.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(n){return I.traverseAncerstors(n,e)},new P.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(n){return!I.traverseAncerstors(n,e)},new P.BindingOnSyntax(this._binding)},t}();$e.BindingWhenSyntax=Ni});var ge=v(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});var Oi=ve(),Ci=function(){function t(e){this._binding=e}return t.prototype.onActivation=function(e){return this._binding.onActivation=e,new Oi.BindingWhenSyntax(this._binding)},t}();Ze.BindingOnSyntax=Ci});var et=v(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});var Ri=ge(),Pi=ve(),Di=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new Pi.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Ri.BindingOnSyntax(this._binding)}return t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t}();Xe.BindingWhenOnSyntax=Di});var wn=v(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});var tt=k(),nt=et(),Bi=function(){function t(e){this._binding=e}return t.prototype.inRequestScope=function(){return this._binding.scope=tt.BindingScopeEnum.Request,new nt.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=tt.BindingScopeEnum.Singleton,new nt.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=tt.BindingScopeEnum.Transient,new nt.BindingWhenOnSyntax(this._binding)},t}();rt.BindingInSyntax=Bi});var bn=v(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});var ji=wn(),xi=ge(),qi=ve(),ki=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new qi.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new xi.BindingOnSyntax(this._binding),this._bindingInSyntax=new ji.BindingInSyntax(e)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t}();it.BindingInWhenOnSyntax=ki});var Mn=v(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});var En=D(),J=k(),Sn=bn(),de=et(),Gi=function(){function t(e){this._binding=e}return t.prototype.to=function(e){return this._binding.type=J.BindingTypeEnum.Instance,this._binding.implementationType=e,new Sn.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+En.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},t.prototype.toConstantValue=function(e){return this._binding.type=J.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new de.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(e){return this._binding.type=J.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new Sn.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(e){return this._binding.type=J.BindingTypeEnum.Constructor,this._binding.implementationType=e,new de.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(e){return this._binding.type=J.BindingTypeEnum.Factory,this._binding.factory=e,new de.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(En.INVALID_FUNCTION_BINDING);var n=this.toConstantValue(e);return this._binding.type=J.BindingTypeEnum.Function,n},t.prototype.toAutoFactory=function(e){return this._binding.type=J.BindingTypeEnum.Factory,this._binding.factory=function(n){var r=function(){return n.container.get(e)};return r},new de.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(e){return this._binding.type=J.BindingTypeEnum.Provider,this._binding.provider=e,new de.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(e){this.toDynamicValue(function(n){return n.container.get(e)})},t}();at.BindingToSyntax=Gi});var In=v(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var Li=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();ot.ContainerSnapshot=Li});var Nn=v(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});var K=D(),Ui=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(e,n){if(e==null)throw new Error(K.NULL_ARGUMENT);if(n==null)throw new Error(K.NULL_ARGUMENT);var r=this._map.get(e);r!==void 0?(r.push(n),this._map.set(e,r)):this._map.set(e,[n])},t.prototype.get=function(e){if(e==null)throw new Error(K.NULL_ARGUMENT);var n=this._map.get(e);if(n!==void 0)return n;throw new Error(K.KEY_NOT_FOUND)},t.prototype.remove=function(e){if(e==null)throw new Error(K.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(K.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(e){var n=this;this._map.forEach(function(r,a){var o=r.filter(function(c){return!e(c)});o.length>0?n._map.set(a,o):n._map.delete(a)})},t.prototype.hasKey=function(e){if(e==null)throw new Error(K.NULL_ARGUMENT);return this._map.has(e)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(n,r){n.forEach(function(a){return e.add(r,a.clone())})}),e},t.prototype.traverse=function(e){this._map.forEach(function(n,r){e(r,n)})},t}();ut.Lookup=Ui});var Cn=v($=>{"use strict";var Fi=$&&$.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function c(d){try{l(r.next(d))}catch(g){o(g)}}function u(d){try{l(r.throw(d))}catch(g){o(g)}}function l(d){d.done?a(d.value):new n(function(g){g(d.value)}).then(c,u)}l((r=r.apply(t,e||[])).next())})},Wi=$&&$.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(d){return function(g){return l([d,g])}}function l(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(o=a[d[0]&2?"return":d[0]?"throw":"next"])&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[0,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],a=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty($,"__esModule",{value:!0});var Vi=xt(),Q=D(),F=k(),st=M(),Yi=Oe(),le=hn(),Ji=Tn(),Hi=Mn(),zi=Y(),Ki=ee(),Qi=In(),On=Nn(),$i=function(){function t(e){var n=e||{};if(typeof n!="object")throw new Error(""+Q.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(n.defaultScope===void 0)n.defaultScope=F.BindingScopeEnum.Transient;else if(n.defaultScope!==F.BindingScopeEnum.Singleton&&n.defaultScope!==F.BindingScopeEnum.Transient&&n.defaultScope!==F.BindingScopeEnum.Request)throw new Error(""+Q.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(n.autoBindInjectable===void 0)n.autoBindInjectable=!1;else if(typeof n.autoBindInjectable!="boolean")throw new Error(""+Q.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(n.skipBaseClassChecks===void 0)n.skipBaseClassChecks=!1;else if(typeof n.skipBaseClassChecks!="boolean")throw new Error(""+Q.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=zi.id(),this._bindingDictionary=new On.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new Yi.MetadataReader}return t.merge=function(e,n){var r=new t,a=le.getBindingDictionary(r),o=le.getBindingDictionary(e),c=le.getBindingDictionary(n);function u(l,d){l.traverse(function(g,E){E.forEach(function(O){d.add(O.serviceIdentifier,O.clone())})})}return u(o,a),u(c,a),r},t.prototype.load=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=this._getContainerModuleHelpersFactory(),a=0,o=e;a<o.length;a++){var c=o[a],u=r(c.id);c.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction)}},t.prototype.loadAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Fi(this,void 0,void 0,function(){var r,a,o,c,u;return Wi(this,function(l){switch(l.label){case 0:r=this._getContainerModuleHelpersFactory(),a=0,o=e,l.label=1;case 1:return a<o.length?(c=o[a],u=r(c.id),[4,c.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=function(o){return function(c){return c.moduleId===o}};n.forEach(function(o){var c=a(o.id);e._bindingDictionary.removeByCondition(c)})},t.prototype.bind=function(e){var n=this.options.defaultScope||F.BindingScopeEnum.Transient,r=new Vi.Binding(e,n);return this._bindingDictionary.add(e,r),new Hi.BindingToSyntax(r)},t.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},t.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(Q.CANNOT_UNBIND+" "+Ki.getServiceIdentifierAsString(e))}},t.prototype.unbindAll=function(){this._bindingDictionary=new On.Lookup},t.prototype.isBound=function(e){var n=this._bindingDictionary.hasKey(e);return!n&&this.parent&&(n=this.parent.isBound(e)),n},t.prototype.isBoundNamed=function(e,n){return this.isBoundTagged(e,st.NAMED_TAG,n)},t.prototype.isBoundTagged=function(e,n,r){var a=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),c=le.createMockRequest(this,e,n,r);a=o.some(function(u){return u.constraint(c)})}return!a&&this.parent&&(a=this.parent.isBoundTagged(e,n,r)),a},t.prototype.snapshot=function(){this._snapshots.push(Qi.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(Q.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(a,o){return o(a)},r)},t.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},t.prototype.get=function(e){return this._get(!1,!1,F.TargetTypeEnum.Variable,e)},t.prototype.getTagged=function(e,n,r){return this._get(!1,!1,F.TargetTypeEnum.Variable,e,n,r)},t.prototype.getNamed=function(e,n){return this.getTagged(e,st.NAMED_TAG,n)},t.prototype.getAll=function(e){return this._get(!0,!0,F.TargetTypeEnum.Variable,e)},t.prototype.getAllTagged=function(e,n,r){return this._get(!1,!0,F.TargetTypeEnum.Variable,e,n,r)},t.prototype.getAllNamed=function(e,n){return this.getAllTagged(e,st.NAMED_TAG,n)},t.prototype.resolve=function(e){var n=this.createChild();return n.bind(e).toSelf(),n.get(e)},t.prototype._getContainerModuleHelpersFactory=function(){var e=this,n=function(u,l){u._binding.moduleId=l},r=function(u){return function(l){var d=e.bind.bind(e),g=d(l);return n(g,u),g}},a=function(u){return function(l){var d=e.unbind.bind(e);d(l)}},o=function(u){return function(l){var d=e.isBound.bind(e);return d(l)}},c=function(u){return function(l){var d=e.rebind.bind(e),g=d(l);return n(g,u),g}};return function(u){return{bindFunction:r(u),isboundFunction:o(u),rebindFunction:c(u),unbindFunction:a(u)}}},t.prototype._get=function(e,n,r,a,o,c){var u=null,l={avoidConstraints:e,contextInterceptor:function(d){return d},isMultiInject:n,key:o,serviceIdentifier:a,targetType:r,value:c};if(this._middleware){if(u=this._middleware(l),u==null)throw new Error(Q.INVALID_MIDDLEWARE_RETURN)}else u=this._planAndResolve()(l);return u},t.prototype._planAndResolve=function(){var e=this;return function(n){var r=le.plan(e._metadataReader,e,n.isMultiInject,n.targetType,n.serviceIdentifier,n.key,n.value,n.avoidConstraints);r=n.contextInterceptor(r);var a=Ji.resolve(r);return a}},t}();$.Container=$i});var Pn=v(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});var Rn=Y(),Zi=function(){function t(e){this.id=Rn.id(),this.registry=e}return t}();_e.ContainerModule=Zi;var Xi=function(){function t(e){this.id=Rn.id(),this.registry=e}return t}();_e.AsyncContainerModule=Xi});var Dn=v(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var ea=D(),ct=M();function ta(){return function(t){if(Reflect.hasOwnMetadata(ct.PARAM_TYPES,t))throw new Error(ea.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(ct.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(ct.PARAM_TYPES,e,t),t}}ft.injectable=ta});var jn=v(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var na=x(),Bn=L();function ra(t,e){return function(n,r,a){var o=new na.Metadata(t,e);typeof a=="number"?Bn.tagParameter(n,r,a,o):Bn.tagProperty(n,r,o)}}dt.tagged=ra});var qn=v(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});var ia=M(),aa=x(),xn=L();function oa(t){return function(e,n,r){var a=new aa.Metadata(ia.NAMED_TAG,t);typeof r=="number"?xn.tagParameter(e,n,r,a):xn.tagProperty(e,n,a)}}lt.named=oa});var Gn=v(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});var ua=M(),sa=x(),kn=L();function ca(){return function(t,e,n){var r=new sa.Metadata(ua.OPTIONAL_TAG,!0);typeof n=="number"?kn.tagParameter(t,e,n,r):kn.tagProperty(t,e,r)}}pt.optional=ca});var Ln=v(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var fa=M(),da=x(),la=L();function pa(){return function(t,e,n){var r=new da.Metadata(fa.UNMANAGED_TAG,!0);la.tagParameter(t,e,n,r)}}ht.unmanaged=pa});var Fn=v(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var ha=M(),ya=x(),Un=L();function va(t){return function(e,n,r){var a=new ya.Metadata(ha.MULTI_INJECT_TAG,t);typeof r=="number"?Un.tagParameter(e,n,r,a):Un.tagProperty(e,n,a)}}yt.multiInject=va});var Wn=v(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});var ga=M(),_a=x(),Ta=L();function ma(t){return function(e,n,r){var a=new _a.Metadata(ga.NAME_TAG,t);Ta.tagParameter(e,n,r,a)}}vt.targetName=ma});var Vn=v(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var Aa=D(),gt=M(),wa=x();function ba(){return function(t,e,n){var r=new wa.Metadata(gt.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(gt.POST_CONSTRUCT,t.constructor))throw new Error(Aa.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(gt.POST_CONSTRUCT,r,t.constructor)}}_t.postConstruct=ba});var Yn=v(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(a){return t.bind(a).toService(e)})}}}});var zn=v(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var Ea=M();b.METADATA_KEY=Ea;var Sa=Cn();b.Container=Sa.Container;var mt=k();b.BindingScopeEnum=mt.BindingScopeEnum;b.BindingTypeEnum=mt.BindingTypeEnum;b.TargetTypeEnum=mt.TargetTypeEnum;var Jn=Pn();b.AsyncContainerModule=Jn.AsyncContainerModule;b.ContainerModule=Jn.ContainerModule;var Ma=Dn();b.injectable=Ma.injectable;var Ia=jn();b.tagged=Ia.tagged;var Na=qn();b.named=Na.named;var Hn=xe();b.inject=Hn.inject;b.LazyServiceIdentifer=Hn.LazyServiceIdentifer;var Oa=Gn();b.optional=Oa.optional;var Ca=Ln();b.unmanaged=Ca.unmanaged;var Ra=Fn();b.multiInject=Ra.multiInject;var Pa=Wn();b.targetName=Pa.targetName;var Da=Vn();b.postConstruct=Da.postConstruct;var Ba=Oe();b.MetadataReader=Ba.MetadataReader;var ja=Y();b.id=ja.id;var xa=L();b.decorate=xa.decorate;var Te=Qe();b.traverseAncerstors=Te.traverseAncerstors;b.taggedConstraint=Te.taggedConstraint;b.namedConstraint=Te.namedConstraint;b.typeConstraint=Te.typeConstraint;var qa=ee();b.getServiceIdentifierAsString=qa.getServiceIdentifierAsString;var ka=Yn();b.multiBindToService=ka.multiBindToService});Object.defineProperty(exports,"__esModule",{value:!0});jt();var Ga=require("vscode"),re=zn(),La=require("path");function Ua(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function Qn(t){if(t&&t.__esModule)return t;let e=Object.create(null);if(t){for(let n in t)if(n!=="default"){let r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}return e.default=t,Object.freeze(e)}var B=Ua(Ga),me=Qn(La);function wt(t,e,n,r){var a=arguments.length,o=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(c=t[u])&&(o=(a<3?c(o):a>3?c(e,n,o):c(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function Kn(t,e){return function(n,r){e(n,r,t)}}function $n(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}var Ae=class{constructor(){this.isInstalled=!1}install(){if(this.isInstalled)throw new Error("Service already installed.");this.isInstalled=!0}};Ae=wt([re.injectable()],Ae);var pe=class extends Ae{constructor(){super(),this.emitter=new B.default.EventEmitter,this.onConfigChange=this.emitter.event,this._config=this.prepare(this.read())}get config(){return this._config}read(){return B.default.workspace.getConfiguration().get("vue")}install(){return super.install(),B.default.Disposable.from(this.emitter,B.default.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("vue.blocks")&&(this._config=this.prepare(this.read()),this.emitter.fire(this.config))}))}async save(e,n){await B.default.workspace.getConfiguration("vue").update(`${e}`,n,e==="blocks")}prepare(e){return{...e,blocks:{...e?.blocks,template:{default:"vue-html",allowed:["pug"]},script:{default:"javascript",allowed:["typescript"]},style:{default:"css",allowed:["sass","scss","less","postcss","stylus"]}}}}};pe=wt([re.injectable(),$n("design:paramtypes",[])],pe);var At=class extends Ae{constructor(e,n){super(),this.configuration=e,this.context=n,this.isActive=!1,this.blocks=JSON.parse(JSON.stringify(this.configuration.config.blocks)),this.supported={},this.onExecute=async()=>{await this.generate(this.configuration.config.blocks),await B.default.window.showInformationMessage("Vue language grammar re-generated. Reload window to apply changes?","Ignore","Reload")==="Reload"&&await B.default.commands.executeCommand("workbench.action.reloadWindow")},this.rootDir=this.context.extensionPath,this.supported=require(me.resolve(this.context.extensionPath,"scripts","supported.json"))}install(){return super.install(),B.default.Disposable.from(B.default.commands.registerTextEditorCommand("vue.generateGrammar",()=>{this.onExecute()}),B.default.workspace.onDidOpenTextDocument(async e=>{this.isVueFile(e.uri)&&await this.checkIfNewLanguage(e.uri)}),B.default.workspace.onDidSaveTextDocument(async e=>{this.isVueFile(e.uri)&&await this.checkIfNewLanguage(e.uri)}))}isVueFile(e){return e.fsPath.endsWith(".vue")}async checkIfNewLanguage(e){this.isActive}async generate(e,n=[]){try{this.isActive=!0;let r=await Promise.resolve().then(function(){return Qn(require("fs"))}),a=JSON.parse(r.readFileSync(me.resolve(this.rootDir,"scripts","config.json"),{encoding:"utf-8"}));r.writeFileSync(me.resolve(this.rootDir,"scripts","config.runtime.json"),JSON.stringify({...e,...a}));let{template:o,script:c,style:u,...l}=e;await this.configuration.save("blocks",l),require(me.resolve(this.rootDir,"scripts","generate-grammar.js")).generate(),n.length>0&&await B.default.window.showInformationMessage(`New block types found in vue files: 
`+n.map(g=>`<${g.block} lang="${g.language}">`).join(", ")+". Reload window to apply changes?","Ignore","Reload")==="Reload"&&await B.default.commands.executeCommand("workbench.action.reloadWindow")}finally{this.isActive=!1}}};At=wt([re.injectable(),Kn(0,re.inject(pe)),Kn(1,re.inject("context")),$n("design:paramtypes",[pe,Object])],At);async function Fa(t){let e=new re.Container({autoBindInjectable:!0,defaultScope:"Singleton"});e.bind("context").toConstantValue(t),t.subscriptions.push(e.get(pe).install(),e.get(At).install(),new B.default.Disposable(()=>e.unbindAll()))}exports.activate=Fa;
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
//# sourceMappingURL=index.js.map
